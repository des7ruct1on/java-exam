Ляпин Иван, М8О-311Б-22

Билет №37:
1.  Интерфейс Map<K,V>. Основные реализации. Как работают вставка, удаление, поиск элемента на примере одной из реализаций.
2. 	Gradle – что это и для чего используется. Рассказать про разные области видимости в dependency, основные таски – clean, build, jar и другие.
3.  Реализовать endpoint в TaskController, которому при запросе передаётся boostrapServers и название топика. В endpoint создаётся consumer Kafka, который читает топик, начиная с самых старых сообщений. Далее в MongoDB находим документ, который содержит в поле test_field значение из первого сообщения Kafka ("test") и возвращаем в endpoint значение поля test_value_field из документа MongoDB в верхнем регистре и с обратным порядком букв

## Первый вопрос
`Map` — структура данных, где каждому ключу соответствует одно значение.
Ключи уникальны, значения — могут повторяться.

## Как `HashMap` работает внутри:

* Использует хеш-функцию для определения индекса в массиве (бакете).
* При коллизии (если два ключа имеют один индекс):

    * Используется цепочка.
* Поиск, вставка, удаление — в среднем O(1), в худшем O(n) (если плохое распределение хешей).


### Основные реализации интерфейса `Map<K, V>`:

| Реализация          | Особенности                                    |
| ------------------- | ---------------------------------------------- |
| `HashMap`           | Неупорядоченный, быстрый доступ (`O(1)`)       |
| `LinkedHashMap`     | Сохраняет **порядок вставки**                  |
| `TreeMap`           | Хранит ключи **отсортированными** (`O(log n)`) |
| `Hashtable`         | Устаревший, синхронизирован, хуже `HashMap`    |
| `ConcurrentHashMap` | Параллельная безопасная реализация             |

## Методы `Map<K, V>`

| Метод                  | Описание                                           |
| ---------------------- | -------------------------------------------------- |
| `put(K key, V value)`  | Добавляет или заменяет значение                    |
| `get(K key)`           | Возвращает значение по ключу                       |
| `remove(K key)`        | Удаляет запись по ключу                            |
| `containsKey(key)`     | Проверяет наличие ключа                            |
| `containsValue(value)` | Проверяет наличие значения                         |
| `keySet()`             | Возвращает `Set<K>` всех ключей                    |
| `values()`             | Возвращает `Collection<V>` всех значений           |
| `entrySet()`           | Возвращает `Set<Map.Entry<K,V>>` пар ключ-значение |

```java
Map<String, Integer> scores = new TreeMap<>();
scores.put("Вика", 90);
scores.put("Антон", 85);
scores.put("Сергей", 70);

System.out.println(scores); // Сортировка по ключу: {Антон=85, Викa=90, Сергей=70}
```

## Пример: `HashMap`

```java
import java.util.*;

public class MapExample {
    public static void main(String[] args) {
        Map<String, Integer> ages = new HashMap<>();

        // ВСТАВКА
        ages.put("Аня", 22);
        ages.put("Борис", 25);
        ages.put("Аня", 23); // перезапись значения по ключу

        // ПОИСК
        System.out.println(ages.get("Аня")); // 23

        // ПРОВЕРКА
        System.out.println(ages.containsKey("Борис")); // true
        System.out.println(ages.containsValue(25)); // true

        // УДАЛЕНИЕ
        ages.remove("Борис");

        // ОБХОД
        for (Map.Entry<String, Integer> entry : ages.entrySet()) {
            System.out.println(entry.getKey() + " -> " + entry.getValue());
        }
    }
}
```

## 2 вопрос
* **Gradle** — это **система сборки** для Java-проектов.
* Основана на **DSL (Domain-Specific Language)** на Groovy или Kotlin.
* Используется для:

    * Сборки кода
    * Загрузки зависимостей
    * Компиляции, тестирования, упаковки
    * Деплоя
    * Генерации кода и документации

## Области видимости зависимостей (Dependency Scopes)

| Scope                | Описание                                                              |
| -------------------- | --------------------------------------------------------------------- |
| `implementation`     | Используется внутри проекта, **не видна** для зависимых модулей.      |
| `api`                | Видна снаружи (используется в библиотеках, которые экспортируют API). |
| `compileOnly`        | Только во время компиляции, **не включается** в runtime.              |
| `runtimeOnly`        | Только во время выполнения, **не нужна при компиляции**.              |
| `testImplementation` | Только для тестов.                                                    |

## Основные таски Gradle

| Таск           | Описание                                      |
| -------------- | --------------------------------------------- |
| `build`        | Полный процесс сборки  |
| `clean`        | Удаляет папку `build/`                        |
| `assemble`     | Собирает артефакты        |
| `check`        | Запускает все тесты                           |
| `test`         | Запускает модульные тесты                     |
| `bootRun`      | Запускает Spring Boot приложение              |
| `bootJar`      | Создает fat JAR                  |
| `dependencies` | Показывает дерево зависимостей                |
| `tasks`        | Показывает все доступные задачи               |
